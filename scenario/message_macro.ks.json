[["label",{"name":"start"},0,7,1],["macro",{"name":"x"},0,9,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('type') == '声'"},0,11,2],["endnowait",0,0,12,3],["o2_iscript",{"o2_exp":"\n\t\t\ttf.tmp.offsetX = 80;\n\t\t\ttf.tmp.textLength = 0;\n\t\t\ttf.tmp.mess = [];\n\t\t\ttf.tmp.mess.cnt = 0;\n\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit();\n//\t\t\tconsole.dir(o2.currentMessageLayer.textsProperties);\n\t\t\t\t//吹き出しサイズの計算\n\t\t\t\tvar rect = o2.currentMessageLayer.textsProperties[0].rect;\n\t\t\t\to2.currentMessageLayer.textsProperties.forEach(function(text,i){\n\n\t\t\t\t\t//tf.tmp.tagInSpeakに何かしらの要素が入っている時（セリフ文中に[w]や[se]などのタグが入っていた時）は処理を行う\n\t\t\t\t\tif (tf.tmp.tagInSpeak[i]){\n\t\t\t\t\t\tif (tf.tmp.mess.cnt > 0){\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}else if (tf.tmp.mess.cnt == 0){\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(tf.tmp.mess[tf.tmp.mess.cnt].text);\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(tf.tmp.tagInSpeak[i]);\n\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit();\n\t\t\t\t\t}\n\n\t\t\t\t\t//dashがあるかないかを調べる\n\t\t\t\t\tif (text.text == ' —— ' || text.text == ' ———— ' || text.text == ' ———————— '){\n\t\t\t\t\t\tif (tf.tmp.mess.cnt > 0 && tf.tmp.mess[tf.tmp.mess.cnt].text != \"\"){\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}else if (tf.tmp.mess.cnt == 0 && tf.tmp.mess[tf.tmp.mess.cnt].text != \"\"){\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(tf.tmp.mess[tf.tmp.mess.cnt].text);\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t//各種dashがあれば、dashを判別する文字列に置き換え\n\t\t\t\t\t\tif (text.text == ' —— '){\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(\"_dash2\");\n\t\t\t\t\t\t}else if (text.text == ' ———— '){\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(\"_dash4\");\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(\"_dash8\");\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit();\n\t\t\t\t\t//rubyがあるかないかを調べる\n\t\t\t\t\t}else if (text.rubyText){\n\t\t\t\t\t\tif (tf.tmp.mess.cnt > 0 && tf.tmp.mess[tf.tmp.mess.cnt].text != \"\"){\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}else if (tf.tmp.mess.cnt == 0 && tf.tmp.mess[tf.tmp.mess.cnt].text != \"\"){\n\t\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(tf.tmp.mess[tf.tmp.mess.cnt].text);\n\t\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(text.text,text.rubyText);\n\t\t\t\t\t\ttf.tmp.mess.cnt ++;\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit();\n\t\t\t\t\t//それ以外（本文）\n\t\t\t\t\t}else{\n\t\t\t\t\t\ttf.tmp.mess[tf.tmp.mess.cnt] = f.ghostpia.messageLayerManager.serifSplit(tf.tmp.mess[tf.tmp.mess.cnt].text+text.text);\n\t\t\t\t\t}\n\n\t\t\t\t\trect.extend(text.rect);\n\n\t\t\t\t});\n\t\t\t\ttf.tmp.rect = rect;\n\t\t\t\trect = null;\n\t\t\t\ttf.tmp.zoompath = Math.round((tf.tmp.rect.width)/(1136-280)*100) + \":\" + Math.round(tf.tmp.rect.height/(220-(60+f.ghostpia.messageLayerManager.getMargin('t')+f.ghostpia.messageLayerManager.getMargin('b')))*100);\n\t\t\t\ttf.tmp.left = Math.round((1136-(f.ghostpia.messageLayerManager.getMargin('back')+f.ghostpia.messageLayerManager.getMargin('back'))-tf.tmp.rect.width)/2)-tf.tmp.offsetX;\n\t\t\t\ttf.tmp.top = Math.round(420+(220-(f.ghostpia.messageLayerManager.getMargin('t')+f.ghostpia.messageLayerManager.getMargin('b'))-tf.tmp.rect.height)/2-tf.tmp.rect.y);\n\t\t"},0,14,14],["er",0,0,82,3],["image",{"storage":"&f.ghostpia.messageLayerManager.getFrame(\"\",true)","layer":"1","page":"&f.ghostpia.messageLayerManager.getPage()","visible":"true","left":"0","top":"0","opacity":"0"},0,84,3],["layopt",{"layer":"1","page":"&f.ghostpia.messageLayerManager.getPage()","visible":"true","opacity":"0","autohide":"true","index":"1000101","left":"&tf.tmp.left","top":"&tf.tmp.top","o2_orx":"90","o2_ory":"40","o2_zoom":"&tf.tmp.zoompath","o2_cond":"f.ghostpia.messageLayerManager.getDecideTrans()"},0,85,3],["nameplate",{"enable":"&f.ghostpia.messageLayerManager.getNameplateEnable()","char":"&f.ghostpia.charManager.getCharNameAscii(f.ghostpia.messageLayerManager.getCurrentValue('disp'))"},0,104,3],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer('声')","page":"&f.ghostpia.messageLayerManager.getPage()","top":"&420+(220-(f.ghostpia.messageLayerManager.getMargin('t')+f.ghostpia.messageLayerManager.getMargin('b'))-tf.tmp.rect.height)/2","left":"&tf.tmp.left+tf.tmp.offsetX","frame":"","width":"&f.ghostpia.messageLayerManager.getWidth('back')","height":"&f.ghostpia.messageLayerManager.getHeight('back')","margint":"&f.ghostpia.messageLayerManager.getMargin('t')","marginr":"&f.ghostpia.messageLayerManager.getMargin('back')","marginb":"&f.ghostpia.messageLayerManager.getMargin('b')","marginl":"&f.ghostpia.messageLayerManager.getMargin('back')","opacity":"0","vertical":"false","visible":"true","slide":"false"},0,106,3],["current",{"layer":"&f.ghostpia.messageLayerManager.getLayer('声')","page":"fore"},0,122,3],["move",{"layer":"1","page":"fore","spline":"false","time":"&f.ghostpia.messageLayerManager.getMoveTime(mp.frame)","delay":"0","o2_path":"&f.ghostpia.messageLayerManager.getMovePath(f.ghostpia.messageLayerManager.getCurrentValue('frame'),tf.tmp.left,tf.tmp.top,tf.tmp.zoompath)","accel":"&f.ghostpia.messageLayerManager.getMoveAccel()","o2_cond":"f.ghostpia.messageLayerManager.getDecideTrans()"},0,124,3],["move",{"layer":"1","page":"back","spline":"false","time":"&f.ghostpia.messageLayerManager.getMoveTime(mp.frame)","delay":"0","o2_path":"&f.ghostpia.messageLayerManager.getMovePath(f.ghostpia.messageLayerManager.getCurrentValue('frame'),tf.tmp.left,tf.tmp.top,tf.tmp.zoompath)","accel":"&f.ghostpia.messageLayerManager.getMoveAccel()","o2_cond":"f.ghostpia.messageLayerManager.getDecideTrans()"},0,133,3],["speaktext",{"enable":"&f.ghostpia.messageLayerManager.getSpeakText()","ignore_skip":"&f.ghostpia.messageLayerManager.getIgnoreSkip()","prefix":"&f.ghostpia.messageLayerManager.getCurrentValue('voice')"},0,143,3],["textchange",{"size":"&f.ghostpia.messageLayerManager.getCurrentValue('fontSize')","speed":"&f.ghostpia.messageLayerManager.getCurrentValue('textSpeed')"},0,144,3],["history",{"output":"true"},0,146,3],["o2_iscript",{"o2_exp":"\n\t\t\ttf.tmp.mess.combine = \"\";\n\t\t\ttf.tmp.mess.cnt = 0;\n\t\t\tf.ghostpia.messageLayerManager.setSpeaking(false);\n\t\t"},0,149,14],["foreach",{"val":"&tf.tmp.mess"},["hoge"],154,3],["o2_iscript",{"o2_exp":"\n\t\t\t\ttf.tmp.mess.combine = tf.tmp.mess[tf.tmp.mess.cnt].text;\n\t\t\t\ttf.tmp.ruby = tf.tmp.mess[tf.tmp.mess.cnt].ruby;\n\t\t\t"},0,155,15],["if",{"o2_exp":"tf.tmp.mess[tf.tmp.mess.cnt].text.indexOf('_dash') != -1"},0,159,4],["if",{"o2_exp":"tf.tmp.mess[tf.tmp.mess.cnt].text.lastIndexOf('2') != -1"},0,160,5],["dash",0,0,161,6],["elsif",{"o2_exp":"tf.tmp.mess[tf.tmp.mess.cnt].text.lastIndexOf('4') != -1"},0,162,5],["dash4",0,0,163,6],["elsif",{"o2_exp":"tf.tmp.mess[tf.tmp.mess.cnt].text.lastIndexOf('8') != -1"},0,164,5],["dash8",0,0,165,6],["endif",0,0,166,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_w') != -1"},0,167,4],["w",{"time":"&tf.tmp.mess.combine.split(',')[1]","canskip":"&tf.tmp.mess.combine.split(',')[2]"},0,168,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_se') != -1"},0,169,4],["se",{"buf":"&tf.tmp.mess.combine.split(',')[1]","storage":"&tf.tmp.mess.combine.split(',')[2]","time":"&tf.tmp.mess.combine.split(',')[3]","vol":"&tf.tmp.mess.combine.split(',')[4]","loop":"&tf.tmp.mess.combine.split(',')[5]","stop":"&tf.tmp.mess.combine.split(',')[6]"},0,170,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_br') != -1"},0,171,4],["br",0,0,172,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_y') != -1"},0,173,4],["y",0,0,174,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_z') != -1"},0,175,4],["z",0,0,176,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_q') != -1"},0,177,4],["quake",{"time":"&tf.tmp.mess.combine.split(',')[1]","hmax":"&tf.tmp.mess.combine.split(',')[2]","vmax":"&tf.tmp.mess.combine.split(',')[3]"},0,178,5],["elsif",{"o2_exp":"tf.tmp.mess.combine.indexOf('_cut') != -1"},0,179,4],["o2_iscript",{"o2_exp":"\n\t\t\t\t\tconductor.setTag(new Tag('cut',JSON.parse(\"{\"+tf.tmp.mess.combine.split('{')[1])));\n\t\t\t\t"},0,181,16],["else",0,0,184,4],["if",{"o2_exp":"tf.tmp.ruby"},0,185,5],["ruby",{"text":"&tf.tmp.ruby"},0,186,6],["ch",{"text":"&tf.tmp.mess.combine"},0,187,6],["else",0,0,188,5],["emb",{"o2_exp":"tf.tmp.mess.combine"},0,189,6],["endif",0,0,190,5],["endif",0,0,191,4],["eval",{"o2_exp":"tf.tmp.mess.cnt++"},0,192,4],["/",0,0,193,3],["o2_iscript",{"o2_exp":"\n\t\t\ttf.tmp.tagInSpeak = {};\n\t\t\tf.ghostpia.messageLayerManager.setDisp(undefined);\n\t\t\tf.ghostpia.messageLayerManager.setEndMessage(true);\n\t\t"},0,195,14],["histext",{"text":"」","aftercurrent":"message1","afterpage":"fore"},0,201,3],["speaktext",{"enable":"false","ignore_skip":"true"},0,203,3],["else",0,0,206,2],["o2_iscript",{"o2_exp":"\n\t\t\tf.ghostpia.messageLayerManager.setEndMessage(true);\n\t\t"},0,207,14],["endif",0,0,210,2],["totitle",{"enabled":"true"},0,213,1],["hr",0,0,215,1],["p",0,0,215,5],["er",0,0,215,8],["current",{"layer":"&f.ghostpia.messageLayerManager.getLayer()","page":"fore"},0,217,1],["endmacro",0,0,219,1],["macro",{"name":"y"},0,224,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,225,1],["o2_iscript",{"o2_exp":"\n\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = '_y';\n\t"},0,226,13],["else",0,0,229,1],["l",0,0,230,1],["hr",0,0,230,4],["endif",0,0,231,1],["r",0,0,232,1],["endmacro",0,0,233,1],["macro",{"name":"z"},0,236,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,237,1],["o2_iscript",{"o2_exp":"\n\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = '_z';\n\t"},0,238,13],["else",0,0,241,1],["waitclick",0,0,242,1],["endif",0,0,243,1],["endmacro",0,0,244,1],["macro",{"name":"w"},0,247,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,248,1],["o2_iscript",{"o2_exp":"\n\t\tif (typeof mp.canskip == 'undefined'){\n\t\t\ttf.tmp.canskip = true;\n\t\t}else{\n\t\t\ttf.tmp.canskip = mp.canskip;\n\t\t}\n\t\tif (typeof mp.time == 'undefined'){\n\t\t\ttf.tmp.waittime = 250;\n\t\t}else{\n\t\t\ttf.tmp.waittime = mp.time;\n\t\t}\n\t"},0,249,13],["eval",{"o2_exp":"tf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length]='_w,'+tf.tmp.waittime+','+tf.tmp.canskip"},0,262,2],["else",0,0,264,1],["wait",{"time":"%time|250","canskip":"%canskip|true"},0,265,2],["endif",0,0,266,1],["endmacro",0,0,267,1],["macro",{"name":"br"},0,270,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,271,1],["o2_iscript",{"o2_exp":"\n\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = '_br';\n\t"},0,272,13],["endif",0,0,275,1],["r",0,0,276,1],["endmacro",0,0,277,1],["macro",{"name":"c"},0,279,1],["locate",{"x":"&f.ghostpia.messageLayerManager.getCenteringLeft(mp.text)"},0,280,1],["emb",{"o2_exp":"mp.text"},0,281,1],["endmacro",0,0,282,1],["macro",{"name":"q"},0,285,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,286,1],["o2_iscript",{"o2_exp":"\n\t\tif (typeof mp.time == 'undefined'){\n\t\t\ttf.tmp.waittime = 250;\n\t\t}else{\n\t\t\ttf.tmp.waittime = mp.time;\n\t\t}\n\t\tif (typeof mp.hmax == 'undefined'){\n\t\t\ttf.tmp.hmax = 10;\n\t\t}else{\n\t\t\ttf.tmp.hmax = mp.hmax;\n\t\t}\n\t\tif (typeof mp.vmax == 'undefined'){\n\t\t\ttf.tmp.vmax = 10;\n\t\t}else{\n\t\t\ttf.tmp.vmax = mp.vmax;\n\t\t}\n\t"},0,287,13],["o2_iscript",{"o2_exp":"\n\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = '_q,'+tf.tmp.waittime+','+tf.tmp.hmax+','+tf.tmp.vmax;\n\t"},0,305,13],["else",0,0,308,1],["quake",{"time":"%time|250","hmax":"%hmax|10","vmax":"%vmax|10"},0,309,2],["endif",0,0,310,1],["endmacro",0,0,311,1],["macro",{"name":"dash"},0,313,1],["style",{"pitch":"-2"},0,314,1],["ch",{"text":" —— "},0,315,1],["wc",{"time":"2"},0,316,1],["style",{"pitch":"&f.ghostpia.constant.getValue('pitch')"},0,317,1],["endmacro",0,0,318,1],["macro",{"name":"dash2"},0,320,1],["dash",0,0,321,1],["endmacro",0,0,322,1],["macro",{"name":"dash4"},0,324,1],["style",{"pitch":"-2"},0,325,1],["ch",{"text":" ———— "},0,326,1],["wc",{"time":"4"},0,327,1],["style",{"pitch":"&f.ghostpia.constant.getValue('pitch')"},0,328,1],["endmacro",0,0,329,1],["macro",{"name":"dash8"},0,331,1],["style",{"pitch":"-2"},0,332,1],["ch",{"text":" ———————— "},0,333,1],["wc",{"time":"8"},0,334,1],["style",{"pitch":"&f.ghostpia.constant.getValue('pitch')"},0,335,1],["endmacro",0,0,336,1],["macro",{"name":"histext"},0,339,1],["o2_historytext",{"text":"%text"},0,340,1],["current",{"layer":"%aftercurrent|message0","page":"%afterpage|fore"},0,341,1],["endmacro",0,0,342,1],["macro",{"name":"ms"},0,345,1],["if",{"o2_exp":"mp.off"},0,346,1],["o2_iscript",{"o2_exp":"\n\t\tf.ghostpia.messageLayerManager.setVisible(false);\n\t\tf.ghostpia.messageLayerManager.setEndMessage(false);\n\t"},0,347,13],["backlay",0,0,351,2],["layopt",{"layer":"message0","page":"back","visible":"false"},0,352,2],["layopt",{"layer":"message1","page":"back","visible":"false"},0,353,2],["layopt",{"layer":"1","page":"back","visible":"false"},0,354,2],["layopt",{"layer":"0","page":"back","visible":"false"},0,355,2],["trans",{"method":"crossfade","time":"&f.ghostpia.constant.getValue('transTime')"},0,356,2],["wt",0,0,357,2],["elsif",{"o2_exp":"mp.on"},0,358,1],["o2_iscript",{"o2_exp":"\n\t\tf.ghostpia.messageLayerManager.setVisible(true);\n\t"},0,359,13],["backlay",0,0,362,2],["layopt",{"layer":"message0","page":"back","visible":"true"},0,363,2],["layopt",{"layer":"message1","page":"back","visible":"true"},0,364,2],["layopt",{"layer":"1","page":"back","visible":"true"},0,365,2],["layopt",{"layer":"0","page":"back","visible":"true"},0,366,2],["trans",{"method":"crossfade","time":"&f.ghostpia.constant.getValue('transTime')"},0,367,2],["wt",0,0,368,2],["endif",0,0,369,1],["endmacro",0,0,370,1],["macro",{"name":"textchange"},0,375,1],["resetstyle",0,0,376,1],["deffont",{"size":"&f.ghostpia.messageLayerManager.getFontSize(mp.size)","color":"&f.ghostpia.messageLayerManager.getTextColor()","o2_shadow":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadow')","o2_shadowblur":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowblur')","o2_shadowoffsetx":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowoffsetx')","o2_shadowoffsety":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowoffsety')","o2_shadowcolor":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowcolor')"},0,377,1],["resetfont",0,0,386,1],["delay",{"speed":"&f.ghostpia.messageLayerManager.getChSpeed(mp.speed)"},0,387,1],["endmacro",0,0,388,1],["macro",{"name":"defaultfont"},0,393,1],["current",{"layer":"message1","page":"fore"},0,395,1],["deffont",{"face":"kokumr","size":"&f.ghostpia.constant.getDefaultFontSize()","rubysize":"&Math.round(f.ghostpia.constant.getDefaultFontSize()/2.4)","color":"0x000000","edge":"false","edgecolor":"0xffffff","bold":"false","o2_shadow":"false"},0,396,1],["resetfont",0,0,406,1],["defstyle",{"linespacing":"&f.ghostpia.constant.getValue('linespacing')","pitch":"&f.ghostpia.constant.getValue('pitch')","linesize":"0","o2_kinsoku":"burasagari-oidashi","o2_kinsoku_bol_char":"。、」』）　！？】","o2_kinsoku_eol_char":"「『（","o2_kinsoku_burasagari_char":"。、！？"},0,407,1],["resetstyle",0,0,416,1],["current",{"layer":"message0","page":"fore"},0,418,1],["deffont",{"face":"kokumr","size":"&f.ghostpia.constant.getDefaultFontSize()","rubysize":"&Math.round(f.ghostpia.constant.getDefaultFontSize()/2.4)","color":"0xffffff","edge":"false","edgecolor":"0x000000","bold":"false","o2_shadow":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadow','文')","o2_shadowblur":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowblur','文')","o2_shadowoffsetx":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowoffsetx','文')","o2_shadowoffsety":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowoffsety','文')","o2_shadowcolor":"&f.ghostpia.messageLayerManager.getTextShadow('o2_shadowcolor','文')"},0,419,1],["resetfont",0,0,433,1],["defstyle",{"linespacing":"&f.ghostpia.constant.getValue('linespacing')","pitch":"&f.ghostpia.constant.getValue('pitch')","linesize":"0","o2_kinsoku":"burasagari-oidashi","o2_kinsoku_bol_char":"。、」』）","o2_kinsoku_eol_char":"「『（","o2_kinsoku_burasagari_char":"。、！？"},0,434,1],["resetstyle",0,0,443,1],["endmacro",0,0,446,1],["macro",{"name":"nameplate"},0,451,1],["if",{"o2_exp":"mp.enable == 'none'"},0,453,1],["backlay",0,0,454,2],["freeimage",{"layer":"0","page":"back"},0,455,2],["trans",{"method":"crossfade","time":"80"},0,456,2],["wt",0,0,457,2],["elsif",{"o2_exp":"mp.enable == true"},0,458,1],["backlay",0,0,460,2],["image",{"storage":"&'nameplate_' + mp.char + f.ghostpia.messageLayerManager.getCurrentValue('npDiff')","layer":"0","page":"back","visible":"true","left":"&f.ghostpia.constant.getNameplatePosition('x')","top":"&f.ghostpia.constant.getNameplatePosition('y')","opacity":"0"},0,461,2],["layopt",{"layer":"0","page":"back","opacity":"255","visible":"true","autohide":"true","index":"1000100"},0,462,2],["trans",{"method":"crossfade","time":"80"},0,464,2],["wt",0,0,465,2],["elsif",{"o2_exp":"mp.enable == false"},0,466,1],["backlay",0,0,467,2],["freeimage",{"layer":"0","page":"back"},0,468,2],["freeimage",{"layer":"1","page":"back"},0,469,2],["trans",{"method":"crossfade","time":"80"},0,470,2],["wt",0,0,471,2],["endif",0,0,472,1],["endmacro",0,0,473,1],["macro",{"name":"messageWindowSetting"},0,478,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('type') == '文'"},0,480,1],["layopt",{"layer":"&f.ghostpia.messageLayerManager.getLayer()","page":"back","visible":"true","opacity":"255","o2_cond":"f.ghostpia.messageLayerManager.getDecideTrans()"},0,482,2],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer()","page":"back","top":"&f.ghostpia.messageLayerManager.getTop()","left":"0","width":"&f.ghostpia.messageLayerManager.getWidth()","height":"&f.ghostpia.messageLayerManager.getHeight()","frame":"&f.ghostpia.messageLayerManager.getFrame(mp.frame)","opacity":"0","margint":"&f.ghostpia.messageLayerManager.getMargin('t')","marginr":"&f.ghostpia.messageLayerManager.getMargin('r')","marginb":"&f.ghostpia.messageLayerManager.getMargin('b')","marginl":"&f.ghostpia.messageLayerManager.getMargin('l')","vertical":"false","visible":"true","slide":"&f.ghostpia.constant.getValue('slide')","slideoffsetx":"&f.ghostpia.constant.getValue('slideoffsetx')","slideoffsety":"&f.ghostpia.constant.getValue('slideoffsety')","slideduration":"&f.ghostpia.constant.getValue('slideduration')","slidefadeduration":"&f.ghostpia.constant.getValue('slidefadeduration')"},0,489,2],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer()","page":"fore","slide":"&f.ghostpia.constant.getValue('slide')","slideoffsetx":"&f.ghostpia.constant.getValue('slideoffsetx')","slideoffsety":"&f.ghostpia.constant.getValue('slideoffsety')","slideduration":"&f.ghostpia.constant.getValue('slideduration')","slidefadeduration":"&f.ghostpia.constant.getValue('slidefadeduration')"},0,510,2],["current",{"layer":"&f.ghostpia.messageLayerManager.getLayer()","page":"fore"},0,519,2],["speaktext",{"enable":"&f.ghostpia.messageLayerManager.getSpeakText()","ignore_skip":"&f.ghostpia.messageLayerManager.getIgnoreSkip()"},0,523,2],["else",0,0,524,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getBeforeType(true) == '文' || typeof f.ghostpia.messageLayerManager.getBeforeType(true) === 'undefined'"},0,525,2],["wait",{"time":"50","canskip":"false"},0,526,3],["backlay",0,0,527,3],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer('文')","page":"back","frame":"","visible":"true"},0,528,3],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer('文')","page":"fore","frame":"","visible":"true"},0,534,3],["trans",{"method":"crossfade","time":"&f.ghostpia.messageLayerManager.getMoveTime('文')"},0,540,3],["wt",{"canskip":"false"},0,541,3],["wait",{"time":"&f.ghostpia.messageLayerManager.getMoveTime('文')","canskip":"false"},0,542,3],["endif",0,0,543,2],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer('声')","page":"back","top":"&f.ghostpia.messageLayerManager.getTop()","left":"0","frame":"","width":"&f.ghostpia.messageLayerManager.getWidth('back')","height":"&f.ghostpia.messageLayerManager.getHeight('back')","opacity":"0","margint":"&f.ghostpia.messageLayerManager.getMargin('back')","marginr":"&f.ghostpia.messageLayerManager.getMargin('back')","marginb":"&f.ghostpia.messageLayerManager.getMargin('back')","marginl":"&f.ghostpia.messageLayerManager.getMargin('back')","vertical":"false","visible":"false"},0,545,2],["position",{"layer":"&f.ghostpia.messageLayerManager.getLayer('声')","page":"fore","top":"&f.ghostpia.messageLayerManager.getTop()","left":"0","frame":"","width":"&f.ghostpia.messageLayerManager.getWidth('back')","height":"&f.ghostpia.messageLayerManager.getHeight('back')","opacity":"0","margint":"&f.ghostpia.messageLayerManager.getMargin('back')","marginr":"&f.ghostpia.messageLayerManager.getMargin('back')","marginb":"&f.ghostpia.messageLayerManager.getMargin('back')","marginl":"&f.ghostpia.messageLayerManager.getMargin('back')","vertical":"false","visible":"false"},0,561,2],["current",{"layer":"&f.ghostpia.messageLayerManager.getLayer('声')","page":"back"},0,577,2],["speaktext",{"enable":"false","ignore_skip":"&f.ghostpia.messageLayerManager.getIgnoreSkip()"},0,578,2],["endif",0,0,579,1],["endmacro",0,0,581,1],["macro",{"name":"文"},0,587,1],["totitle",{"enabled":"false"},0,588,1],["o2_iscript",{"o2_exp":"\n//\tconsole.groupCollapsed(\"[ghostpia] macro : \"+currentConductor.macroStack[0].definition.name);\n//\t\tconsole.dir(mp);\n"},0,589,12],["o2_iscript",{"o2_exp":"\n\tf.ghostpia.messageLayerManager.setType('文');\n\tf.ghostpia.messageLayerManager.setRow(mp.row);\n\tf.ghostpia.messageLayerManager.setTop(mp.y);\n\tf.ghostpia.messageLayerManager.setVisible(true);\n\tf.ghostpia.messageLayerManager.setVoice('none','none');\n\tf.ghostpia.messageLayerManager.setEndMessage(false);\n\tf.ghostpia.charManager.setCurrentChar(undefined);\n"},0,593,12],["wait",{"time":"50","canskip":"false"},0,605,1],["backlay",0,0,606,1],["freeimage",{"layer":"0","page":"back"},0,607,1],["freeimage",{"layer":"1","page":"back"},0,608,1],["messagewindowsetting",{"frame":"%frame"},0,609,1],["textchange",{"size":"%size","speed":"%speed"},0,610,1],["trans",{"method":"crossfade","time":"120"},0,611,1],["wt",{"canskip":"false"},0,612,1],["wait",{"time":"120","canskip":"false"},0,613,1],["endmacro",0,0,617,1],["macro",{"name":"声"},0,620,1],["totitle",{"enabled":"false"},0,621,1],["o2_iscript",{"o2_exp":"\n\tf.ghostpia.messageLayerManager.setType('声');\n\tf.ghostpia.messageLayerManager.setRow(mp.row);\n\tf.ghostpia.messageLayerManager.setTop(mp.y);\n\tf.ghostpia.messageLayerManager.setVisible(true);\n\tf.ghostpia.messageLayerManager.setFrame(mp.frame);\n\tf.ghostpia.messageLayerManager.setSilent(mp.silent);\n\tf.ghostpia.charManager.setCurrentChar(mp.charname);\n\tf.ghostpia.messageLayerManager.setVoice(mp.voice,mp.charname);\n\tf.ghostpia.messageLayerManager.setFontSize(mp.size);\n\tf.ghostpia.messageLayerManager.setChSpeed(mp.speed);\n\tf.ghostpia.messageLayerManager.setEndMessage(false);\n\tf.ghostpia.messageLayerManager.setSpeaking(true);\n\tf.ghostpia.messageLayerManager.setNameplateDiff(mp.np);\n"},0,622,12],["speaktext",{"enable":"false","ignore_skip":"&f.ghostpia.messageLayerManager.getIgnoreSkip()"},0,641,1],["if",{"o2_exp":"tf.tmp.forcedChangeDisp == true || typeof f.ghostpia.messageLayerManager.getCurrentValue('disp') === 'undefined' || f.ghostpia.messageLayerManager.getCurrentValue('disp') != f.ghostpia.messageLayerManager.getBeforeDisp() || f.ghostpia.charManager.getCurrentChar() != f.ghostpia.charManager.getBeforeChar()"},0,642,1],["o2_iscript",{"o2_exp":"\n\t\tf.ghostpia.messageLayerManager.setDisp(mp.disp);\n\t"},0,643,13],["histext",{"text":"&f.ghostpia.charManager.getHistoryCharName(f.ghostpia.messageLayerManager.getCurrentValue('disp'))"},0,646,2],["hr",0,0,647,2],["endif",0,0,648,1],["histext",{"text":"「","aftercurrent":"&f.ghostpia.messageLayerManager.getLayer('声')","afterpage":"back"},0,649,1],["messagewindowsetting",0,0,650,1],["textchange",{"size":"%size","speed":"%speed"},0,651,1],["history",{"output":"false"},0,653,1],["wait",{"time":"50","canskip":"false"},0,654,1],["nowait",0,0,655,1],["endmacro",0,0,656,1],["eval",{"o2_exp":"tf.tmp.cnt = 0;"},0,661,1],["call",{"target":"*char_sub"},0,662,1],["macro",{"name":"char"},0,663,1],["o2_iscript",{"o2_exp":"\n//\t\tconsole.groupCollapsed(\"[ghostpia] macro : \"+currentConductor.macroStack[0].definition.name);\n//\t\t\tconsole.dir(mp);\n\t"},0,664,13],["声",{"row":"%row","frame":"%frame","size":"%size","speed":"%speed","silent":"%silent","char":"&f.ghostpia.charManager.getCharNameAscii(mp.name)","disp":"%disp","voice":"%voice","charname":"%name","np":"%np"},0,668,2],["o2_iscript",{"o2_exp":"\n//\t\tconsole.groupEnd();\n\t"},0,669,13],["endmacro",0,0,672,1],["return",0,0,674,1],["label",{"name":"char_sub"},0,676,1],["macro",{"name":"&f.ghostpia.charManager.getCharName(tf.tmp.cnt)"},0,677,1],["char",{"*":"true","name":"&currentConductor.macroStack[0].definition.name","row":"%row","frame":"%frame","size":"%size","speed":"%speed","np":"%np"},0,678,2],["endmacro",0,0,679,1],["eval",{"o2_exp":"tf.tmp.cnt++"},0,680,1],["jump",{"target":"*char_sub","o2_cond":"tf.tmp.cnt < f.ghostpia.charManager.getCharListlength()"},0,681,1],["return",0,0,682,1]]