[["label",{"name":"start"},0,7,1],["macro",{"name":"bgm"},0,44,1],["ms",{"off":"true","o2_cond":"f.ghostpia.messageLayerManager.getCurrentValue('endMessage');"},0,45,2],["o2_iscript",{"o2_exp":"\n\t\t//ghostpia.soundManager.setStorage(mp.storgae);\n\n\t\t//BGMがデカイという話あるので、ここで設定\n\t\to2.setBgmGVolume(f.ghostpia.constant.getValue('bgmGVolume'));\n\n\t\tf.ghostpia.soundManager.setVolume(mp.vol);\n\t\tf.ghostpia.soundManager.setLoop(mp.loop);\n\n//\t\tconsole.group(\"[ghostpia] macro : \"+currentConductor.macroStack[0].definition.name);\n//\t\t\tconsole.dir(mp);\n\t"},0,46,13],["if",{"o2_exp":"mp.stop"},0,59,2],["o2_iscript",{"o2_exp":"\n\t\t\tf.ghostpia.soundManager.setFadeTime(mp.time,'stop');\n//\t\t\tconsole.log(\"stop -> time : \"+f.ghostpia.soundManager.getFadeTime());\n\t\t"},0,61,14],["if",{"o2_exp":"f.ghostpia.soundManager.getValue('fadeTime') == 0"},0,66,3],["stopbgm",0,0,67,4],["else",0,0,68,3],["fadeoutbgm",{"time":"&f.ghostpia.soundManager.getValue('fadeTime')"},0,69,4],["wb",{"o2_cond":"mp.wait"},0,71,4],["endif",0,0,72,3],["elsif",{"o2_exp":"mp.xfade"},0,74,2],["o2_iscript",{"o2_exp":"\n\t\t\tf.ghostpia.soundManager.setFadeTime(mp.time,'xfade');\n\t\t\tif (typeof mp.storage == 'undefined'){\n//\t\t\t\tconsole.warn(\"xfade -> storageが指定されていません\");\n\t\t\t}else{\n//\t\t\t\tconsole.log(\"xfade -> storage : \"+mp.storage+\" , time : \"+f.ghostpia.soundManager.getFadeTime()+\" , volume : \"+f.ghostpia.soundManager.getVolume()+\" , loop : \"+f.ghostpia.soundManager.getLoop());\n\t\t\t}\n\t\t"},0,75,14],["xchgbgm",{"storage":"%storage","loop":"&f.ghostpia.soundManager.getValue('loop')","time":"&f.ghostpia.soundManager.getValue('fadeTime')","overlap":"&f.ghostpia.soundManager.getValue('fadeTime')","volume":"&f.ghostpia.soundManager.getValue('volume')"},0,85,3],["else",0,0,87,2],["wb",0,0,88,3],["if",{"o2_exp":"mp.storage"},0,90,3],["o2_iscript",{"o2_exp":"\n\t\t\t\tf.ghostpia.soundManager.setFadeTime(mp.time,'play');\n\t\t\t\t//console.log(\"play -> storage : \"+mp.storage+\" , time : \"+f.ghostpia.soundManager.getFadeTime()+\" , volume : \"+f.ghostpia.soundManager.getVolume()+\" , loop : \"+f.ghostpia.soundManager.getLoop());\n\t\t\t"},0,91,15],["if",{"o2_exp":"f.ghostpia.soundManager.getValue('fadeTime') == 0"},0,96,4],["playbgm",{"storage":"%storage","loop":"&f.ghostpia.soundManager.getValue('loop')"},0,97,5],["bgmopt",{"volume":"&f.ghostpia.soundManager.getValue('volume')"},0,98,5],["else",0,0,99,4],["fadeinbgm",{"storage":"%storage","time":"&f.ghostpia.soundManager.getValue('fadeTime')","o2_volume":"&f.ghostpia.soundManager.getValue('volume')","loop":"&f.ghostpia.soundManager.getValue('loop')"},0,100,5],["wb",{"o2_cond":"mp.wait"},0,103,5],["endif",0,0,104,4],["else",0,0,105,3],["o2_iscript",{"o2_exp":"\n\t\t\t\tf.ghostpia.soundManager.setFadeTime(mp.time);\n//\t\t\t\tconsole.log(\"fade -> volume : \"+f.ghostpia.soundManager.getVolume()+\" , time : \"+f.ghostpia.soundManager.getFadeTime());\n\t\t\t"},0,106,15],["if",{"o2_exp":"f.ghostpia.soundManager.getValue('fadeTime') == 0"},0,111,4],["bgmopt",{"volume":"&f.ghostpia.soundManager.getValue('volume')"},0,112,5],["else",0,0,113,4],["fadebgm",{"volume":"&f.ghostpia.soundManager.getValue('volume')","time":"&f.ghostpia.soundManager.getValue('fadeTime')"},0,114,5],["wb",{"o2_cond":"mp.wait"},0,116,5],["endif",0,0,117,4],["endif",0,0,118,3],["endif",0,0,119,2],["wl",{"o2_cond":"mp.waitplay"},0,121,2],["endmacro",0,0,128,1],["macro",{"name":"se"},0,130,1],["if",{"o2_exp":"f.ghostpia.messageLayerManager.getCurrentValue('speaking')"},0,133,1],["o2_iscript",{"o2_exp":"\n\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = '_se,';\n\t\tif (mp.buf != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += mp.buf+',';\n\t\t}else{\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += '0,';\n\t\t}\n\t\tif (mp.storage != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += mp.storage+',';\n\t\t}else{\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += ',';\n\t\t}\n\t\tif (mp.time != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += mp.time+',';\n\t\t}else{\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += ',';\n\t\t}\n\t\tif (mp.vol != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += mp.vol+',';\n\t\t}else{\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += ',';\n\t\t}\n\t\tif (mp.loop != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += true+',';\n\t\t}else{\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += ',';\n\t\t}\n\t\tif (mp.stop != null){\n\t\t\ttf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += true;\n\t\t}else{\n\t\t\t//tf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] += ;\n\t\t}\n//\t\tconsole.log(\"tf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length] = \"+tf.tmp.tagInSpeak[o2.currentMessageLayer.textsProperties.length])\n\t"},0,134,13],["else",0,0,168,1],["o2_iscript",{"o2_exp":"\n\t\t//ghostpia.soundManager.setStorage(mp.storgae);\n\t\tf.ghostpia.seManager.setVolume(mp.vol,mp.buf);\n\t\tf.ghostpia.seManager.setLoop(mp.loop,mp.buf);\n\n//\t\tconsole.group(\"[ghostpia] macro : \"+currentConductor.macroStack[0].definition.name);\n//\t\t\tconsole.dir(mp);\n//\t\t\tif (!mp.buf){\n//\t\t\t\tconsole.warn('buf属性が指定されていないため、buf=0が指定されます');\n//\t\t\t}\n\t"},0,170,13],["if",{"o2_exp":"mp.stop"},0,182,2],["o2_iscript",{"o2_exp":"\n\t\t\tf.ghostpia.seManager.setFadeTime(mp.time,'stop',mp.buf);\n//\t\t\tconsole.log(\"stop -> buf : \"+f.ghostpia.seManager.getBuf(mp.buf)+\" , time : \"+f.ghostpia.seManager.getFadeTime(mp.buf));\n\t\t"},0,184,14],["if",{"o2_exp":"f.ghostpia.seManager.getValue('fadeTime',mp.buf) == 0"},0,189,3],["stopse",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)"},0,190,4],["else",0,0,191,3],["fadeoutse",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","time":"&f.ghostpia.seManager.getValue('fadeTime',mp.buf)"},0,192,4],["wf",{"o2_cond":"mp.wait"},0,195,4],["endif",0,0,196,3],["else",0,0,198,2],["wf",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)"},0,199,3],["if",{"o2_exp":"mp.storage"},0,201,3],["o2_iscript",{"o2_exp":"\n\t\t\t\tf.ghostpia.seManager.setFadeTime(mp.time,'play',mp.buf);\n//\t\t\t\tconsole.log(\"play -> buf : \"+f.ghostpia.seManager.getBuf(mp.buf)+\" , storage : \"+mp.storage+\" , time : \"+f.ghostpia.seManager.getFadeTime(mp.buf)+\" , volume : \"+f.ghostpia.seManager.getVolume(mp.buf)+\" , loop : \"+f.ghostpia.seManager.getLoop(mp.buf));\n\t\t\t"},0,202,15],["if",{"o2_exp":"f.ghostpia.seManager.getValue('fadeTime',mp.buf) == 0"},0,207,4],["seopt",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","volume":"&f.ghostpia.seManager.getValue('volume',mp.buf)","pan":"%pan|0"},0,208,5],["playse",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","storage":"%storage","loop":"&f.ghostpia.seManager.getValue('loop',mp.buf)","o2_cond":"!mp.o2_start"},0,209,5],["playse",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","storage":"%storage","loop":"&f.ghostpia.seManager.getValue('loop',mp.buf)","o2_start":"&mp.o2_start","o2_cond":"mp.o2_start"},0,210,5],["else",0,0,211,4],["fadeinse",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","storage":"%storage","time":"&f.ghostpia.seManager.getValue('fadeTime',mp.buf)","loop":"&f.ghostpia.seManager.getValue('loop',mp.buf)"},0,212,5],["wf",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","o2_cond":"mp.wait"},0,215,5],["endif",0,0,216,4],["else",0,0,217,3],["o2_iscript",{"o2_exp":"\n\t\t\t\tf.ghostpia.seManager.setFadeTime(mp.time,undefined,mp.buf);\n//\t\t\t\tconsole.log(\"fade -> buf : \"+f.ghostpia.seManager.getBuf(mp.buf)+\" , volume : \"+f.ghostpia.seManager.getVolume(mp.buf)+\" , time : \"+f.ghostpia.seManager.getFadeTime(mp.buf));\n\t\t\t"},0,218,15],["if",{"o2_exp":"f.ghostpia.seManager.getValue('fadeTime',mp.buf) == 0"},0,223,4],["seopt",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","volume":"&f.ghostpia.seManager.getValue('volume',mp.buf)"},0,224,5],["else",0,0,225,4],["fadese",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","volume":"&f.ghostpia.seManager.getValue('volume',mp.buf)","time":"&f.ghostpia.seManager.getValue('fadeTime',mp.buf)"},0,226,5],["wf",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","o2_cond":"mp.wait"},0,228,5],["endif",0,0,229,4],["endif",0,0,230,3],["endif",0,0,232,2],["ws",{"buf":"&f.ghostpia.seManager.getBuf(mp.buf)","o2_cond":"mp.waitplay"},0,234,2],["endif",0,0,240,1],["endmacro",0,0,241,1],["return",0,0,245,1]]